<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>union-type initialization - cppreference.com</title>
<meta charset="UTF-8">
<meta name="generator" content="MediaWiki 1.21.2">


<link rel="shortcut icon" href="../../../favicon.ico">



<link rel="stylesheet" href="../../../common/ext.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<link rel="stylesheet" href="../../../common/site_modules.css">
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}#toc{display:none}.editsection{display:none}
/* cache key: mwiki1-mwiki_en_:resourceloader:filter:minify-css:7:472787eddcf4605d11de8c7ef047234f */</style>

<script src="../../../common/startup_scripts.js"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"c/language/union_type_initialization","wgTitle":"c/language/union type initialization","wgCurRevisionId":72646,"wgArticleId":13743,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"c/language/union_type_initialization","wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":0,"showtoolbar":1,"skin":"cppreference2","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"gadget-ColiruCompiler":1});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});;},{},{});
/* cache key: mwiki1-mwiki_en_:resourceloader:filter:minify-js:7:ca03345b1e2c4d90a25d968753a73b92 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-c {line-height: normal;}
.source-c li, .source-c pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for c
 * CSS class: source-c, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.c.source-c .de1, .c.source-c .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.c.source-c  {font-family:monospace;}
.c.source-c .imp {font-weight: bold; color: red;}
.c.source-c li, .c.source-c .li1 {font-weight: normal; vertical-align:top;}
.c.source-c .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.c.source-c .li2 {font-weight: bold; vertical-align:top;}
.c.source-c .kw1 {color: #0000dd;}
.c.source-c .kw2 {color: #0000ff;}
.c.source-c .kw3 {color: #0000dd;}
.c.source-c .kw4 {color: #0000ff;}
.c.source-c .co1 {color: #909090;}
.c.source-c .co2 {color: #339900;}
.c.source-c .coMULTI {color: #ff0000; font-style: italic;}
.c.source-c .es0 {color: #008000; font-weight: bold;}
.c.source-c .es1 {color: #008000; font-weight: bold;}
.c.source-c .es2 {color: #008000; font-weight: bold;}
.c.source-c .es3 {color: #008000; font-weight: bold;}
.c.source-c .es4 {color: #008000; font-weight: bold;}
.c.source-c .es5 {color: #008000; font-weight: bold;}
.c.source-c .br0 {color: #008000;}
.c.source-c .sy0 {color: #008000;}
.c.source-c .sy1 {color: #000080;}
.c.source-c .sy2 {color: #000040;}
.c.source-c .sy3 {color: #000040;}
.c.source-c .sy4 {color: #008080;}
.c.source-c .st0 {color: #008000;}
.c.source-c .nu0 {color: #000080;}
.c.source-c .nu6 {color:#000080;}
.c.source-c .nu8 {color:#000080;}
.c.source-c .nu12 {color:#000080;}
.c.source-c .nu16 {color:#000080;}
.c.source-c .nu17 {color:#000080;}
.c.source-c .nu18 {color:#000080;}
.c.source-c .nu19 {color:#000080;}
.c.source-c .ln-xtra, .c.source-c li.ln-xtra, .c.source-c div.ln-xtra {background-color: #ffc;}
.c.source-c span.xtra { display:block; }

/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/mwiki/skins/cppreference2/csshover.min.htc")}</style><![endif]-->
<script defer src="../../../../qref.js"></script></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-c_language_union_type_initialization skin-cppreference2 action-view">
        <!-- header -->
        
        <!-- /header -->
        <!-- content -->
        <div id="cpp-content-base">
            <div id="content">
                <a id="top"></a>
                <div id="mw-js-message" style="display:none;"></div>
                                <!-- firstHeading -->
                <h1 id="firstHeading" class="firstHeading">union-type initialization</h1>
                <!-- /firstHeading -->
                <!-- bodyContent -->
                <div id="bodyContent">
                                        <!-- tagline -->
                    <div id="siteSub">From cppreference.com</div>
                    <!-- /tagline -->
                                        <!-- subtitle -->
                    <div id="contentSub"><span class="subpages">&lt; <a href="../../c.html" title="c">c</a>‎ | <a href="../language.1.html" title="c/language">language</a></span></div>
                    <!-- /subtitle -->
                                                            <!-- bodycontent -->
                    <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p><a href="http%3A//en.cppreference.com/mwiki/index.php" class="new" title="Template:c/language/initialization/navbar (page does not exist)">Template:c/language/initialization/navbar</a>
</p>
<p>This is the initialization performed when a union is constructed.
</p>
<h3>
<span class="editsection">[<a href="http%3A//en.cppreference.com/mwiki/index.php" title="Edit section: Explanation">edit</a>]</span> <span class="mw-headline" id="Explanation">Explanation</span>
</h3>
<p>If a union has automatic storage duration and is not initialized explicitly, its initial value is indeterminate.
</p>
<p>If a union has static or thread storage duration and is not initialized explicitly, then the first named member is initialized (recursively) according to these rules, and any padding is initialized to zero bits.  If the first member has
</p>
<ul>
<li> pointer type, it is initialized to a null pointer;
</li>
<li> arithmetic type, it is initialized to (positive or unsigned) zero;
</li>
<li> aggregate type, it is initialized (recursively) according to these rules, and any padding is initialized to zero bits;
</li>
<li> union type, the first named member is initialized (recursively) according to these rules, and any padding is initialized to zero bits.
</li>
</ul>
<p>The initializer for a union object that has automatic storage duration shall be either an initializer list or a single expression that has compatible union type.
</p>
<p>When no designator is present, the order of initialization of union members is simply the first union member.  A designator can initialize any union member.
</p>
<p>The type of the initialized member of a union determines what rules of initialization are applied.  For example, if the initialized member is a scalar object, the rule of initialization for a scalar object is applied.
</p>
<p>The evaluations of the initialization list expressions are indeterminately sequenced with respect to one another and thus the order in which any side effects occur is unspecified.
</p>
<h3>
<span class="editsection">[<a href="http%3A//en.cppreference.com/mwiki/index.php" title="Edit section: Example">edit</a>]</span> <span class="mw-headline" id="Example">Example</span>
</h3>
<div class="t-example">
<div class="t-example-live-link"><div class="coliru-btn coliru-btn-run-init">Run this code</div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="c source-c"><pre class="de1"><span class="co2">#include &lt;limits.h&gt;</span>
 
<span class="kw4">int</span> main<span class="br0">(</span><span class="kw4">void</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">union</span> U1 <span class="br0">{</span>
        <span class="kw4">short</span> <span class="kw4">int</span> si<span class="sy4">;</span>
        <span class="kw4">int</span>        i<span class="sy4">;</span>
        <span class="kw4">long</span> <span class="kw4">int</span>  li<span class="sy4">;</span>
    <span class="br0">}</span> u1<span class="sy4">;</span>                     <span class="coMULTI">/* initial value is indeterminate */</span>
 
    <span class="kw1">union</span> U2 <span class="br0">{</span>
        <span class="kw4">short</span> <span class="kw4">int</span> si<span class="sy4">;</span>
        <span class="kw4">int</span>        i<span class="sy4">;</span>
        <span class="kw4">long</span> <span class="kw4">int</span>  li<span class="sy4">;</span>
    <span class="br0">}</span> u2<span class="sy4">;</span>                     <span class="coMULTI">/* static storage duration: 0 + zero-bit padding    */</span>
 
    <span class="kw1">union</span> U3 <span class="br0">{</span>
        <span class="kw4">short</span> <span class="kw4">int</span> si<span class="sy4">;</span>
        <span class="kw4">int</span>        i<span class="sy4">;</span>
        <span class="kw4">long</span> <span class="kw4">int</span>  li<span class="sy4">;</span>
    <span class="br0">}</span> u3 <span class="sy1">=</span> <span class="br0">{</span><a href="../types/limits.html"><span class="kw363">SHRT_MAX</span></a><span class="br0">}</span><span class="sy4">;</span>        <span class="coMULTI">/* first member initialized */</span>
 
    <span class="kw1">union</span> U4 <span class="br0">{</span>
        <span class="kw4">short</span> <span class="kw4">int</span> si<span class="sy4">;</span>
        <span class="kw4">int</span>        i<span class="sy4">;</span>
        <span class="kw4">long</span> <span class="kw4">int</span>  li<span class="sy4">;</span>
    <span class="br0">}</span> u4 <span class="sy1">=</span> <span class="br0">{</span>.<span class="me1">li</span><span class="sy1">=</span><a href="../types/limits.html"><span class="kw365">LONG_MAX</span></a><span class="br0">}</span><span class="sy4">;</span>   <span class="coMULTI">/* a designator can initialize any member */</span>
 
    <span class="kw1">union</span> U5 <span class="br0">{</span>                <span class="coMULTI">/* first member is a sub-array */</span>
        <span class="kw4">int</span>  i<span class="br0">[</span><span class="nu0">5</span><span class="br0">]</span><span class="sy4">;</span>
        <span class="kw4">char</span> c<span class="sy4">;</span>          
    <span class="br0">}</span> u5 <span class="sy1">=</span> <span class="br0">{</span> <span class="br0">{</span><span class="nu0">1</span>,<span class="nu0">2</span>,<span class="nu0">3</span>,<span class="nu0">4</span>,<span class="nu0">5</span><span class="br0">}</span> <span class="br0">}</span><span class="sy4">;</span>
 
    <span class="kw1">union</span> U6 <span class="br0">{</span>                <span class="coMULTI">/* first member is a sub-structure */</span>
        <span class="kw1">struct</span> s <span class="br0">{</span>
               <span class="kw4">char</span> c<span class="sy4">;</span>
               <span class="kw4">int</span> i<span class="sy4">;</span>
        <span class="br0">}</span> ss<span class="sy4">;</span>
        <span class="kw4">char</span> c<span class="sy4">;</span>          
    <span class="br0">}</span> u6 <span class="sy1">=</span> <span class="br0">{</span> <span class="br0">{</span><span class="st0">'a'</span>,<span class="nu0">1</span><span class="br0">}</span> <span class="br0">}</span><span class="sy4">;</span>
 
    <span class="kw1">union</span> U7 <span class="br0">{</span>                <span class="coMULTI">/* first member is a sub-union */</span>
        <span class="kw1">union</span> u <span class="br0">{</span>
               <span class="kw4">char</span> c<span class="sy4">;</span>
               <span class="kw4">int</span> i<span class="sy4">;</span>
        <span class="br0">}</span> uu<span class="sy4">;</span>
        <span class="kw4">char</span> c<span class="sy4">;</span>          
    <span class="br0">}</span> u7 <span class="sy1">=</span> <span class="br0">{</span> <span class="br0">{</span><span class="st0">'a'</span><span class="br0">}</span> <span class="br0">}</span><span class="sy4">;</span>
 
    <span class="kw1">return</span> <span class="nu0">0</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p>Possible output:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="text source-text"><pre class="de1">(none)</pre></div></div> 
</div>

<!-- 
NewPP limit report
Preprocessor visited node count: 79/1000000
Preprocessor generated node count: 394/1000000
Post‐expand include size: 816/2097152 bytes
Template argument size: 3673/2097152 bytes
Highest expansion depth: 9/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mwiki1-mwiki_en_:pcache:idhash:13743-0!*!0!!*!*!* and timestamp 20141015110418 -->
</div>                    <!-- /bodycontent -->
                                        <!-- printfooter -->
                    <div class="printfooter">
                    Retrieved from "<a href="http%3A//en.cppreference.com/mwiki/index.php">http://en.cppreference.com/mwiki/index.php?title=c/language/union_type_initialization&amp;oldid=72646</a>"                    </div>
                    <!-- /printfooter -->
                                                            <!-- catlinks -->
                    <div id="catlinks" class="catlinks catlinks-allhidden"></div>                    <!-- /catlinks -->
                                                            <div class="visualClear"></div>
                    <!-- debughtml -->
                                        <!-- /debughtml -->
                </div>
                <!-- /bodyContent -->
            </div>
        </div>
        <!-- /content -->
        <!-- footer -->
        
        <!-- /footer -->
        <script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="../../../common/skin_scripts.js"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi","ext.gadget.ColiruCompiler"], null, true);
}</script>
<script src="../../../common/site_scripts.js"></script>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-2828341-1']);
_gaq.push(['_setDomainName', 'cppreference.com']);
_gaq.push(['_trackPageview']);
</script><!-- Served in 0.271 secs. -->
	</body>
<!-- Cached 20141015110418 -->
</html>
